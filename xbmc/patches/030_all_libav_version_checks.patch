commit a0c8d582d76ac353d8035caf2ff03852d6fc0bee
Author: David HÃ¤rdeman <david@hardeman.nu>
Date:   Sun Apr 7 16:39:33 2013 +0200

    Update libavcodec version check
    
    Make the version check compatible with both ffmpeg and libav.
    Also add comments describing when the API change was made for
    both libraries.

diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Overlay/DVDOverlayCodecFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDCodecs/Overlay/DVDOverlayCodecFFmpeg.cpp
index 4dbf8b0..7f7b304 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Overlay/DVDOverlayCodecFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Overlay/DVDOverlayCodecFFmpeg.cpp
@@ -255,7 +255,12 @@ CDVDOverlay* CDVDOverlayCodecFFmpeg::GetOverlay()
     overlay->width    = rect.w;
     overlay->height   = rect.h;
 
-#if (!defined USE_EXTERNAL_FFMPEG) || (LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(54,71,100))
+#if (defined(LIBAVCODEC_FROM_FFMPEG) && LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(54,71,100)) || \
+    (defined(LIBAVCODEC_FROM_LIBAV)  && LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(54,33,0))
+    // ffmpeg commit: 1885ffb03d0af28e6bac2bcc8725fa15b93f6ac9 (Nov 3 2012)
+    //       release: 1.1 (Jan 7 2013)
+    // libav  commit: 85f67c4865d8014ded2aaa64b3cba6e2970342d7 (Oct 20 2012)
+    //       release: v9 (Jan 5 2013)
     overlay->bForced  = rect.flags != 0;
 #endif
 
